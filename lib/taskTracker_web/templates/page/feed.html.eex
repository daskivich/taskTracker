<%= if @current_user do %>

  <%= render TaskTrackerWeb.TaskView, "new.html",
    Map.put(assigns, :action, task_path(@conn, :create)) |>
      Map.put(:cancel, false) %>

  <h1 class="text-center">Your Tasks</h1>

  <%= Enum.map @tasks, fn task -> %>
    <%= if task.user_id == @current_user.id do %>
      <%= render TaskTrackerWeb.TaskView, "show.html", Map.put(assigns, :task, task) %>
    <% end %>
  <% end %>

<% end %>
